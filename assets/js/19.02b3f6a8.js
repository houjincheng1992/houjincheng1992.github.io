(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{277:function(t,a,e){"use strict";e.r(a);var s=e(38),r=Object(s.a)({},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"zabbix-安装"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#zabbix-安装","aria-hidden":"true"}},[t._v("#")]),t._v(" zabbix 安装")]),t._v(" "),e("p",[t._v("zabbix 整体分为两个部分 agent 与 server:")]),t._v(" "),e("ol",[e("li",[e("p",[t._v("zabbix agent需要安装在被监视的目标服务器上，它主要完成对硬件信息或与操作系统有关的内存，CPU等信息的收集。")])]),t._v(" "),e("li",[e("p",[t._v("zabbix server可以单独监视远程服务器的服务状态；同时也可以与zabbix agent配合，可以轮询zabbix agent主动接收监视数据（agent方式），同时还可被动接收zabbix agent发送的数据（trapping方式）。")])])]),t._v(" "),e("h2",{attrs:{id:"环境"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#环境","aria-hidden":"true"}},[t._v("#")]),t._v(" 环境")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",{staticStyle:{"text-align":"center"}},[t._v("名称")]),t._v(" "),e("th",{staticStyle:{"text-align":"center"}},[t._v("版本")])])]),t._v(" "),e("tbody",[e("tr",[e("td",{staticStyle:{"text-align":"center"}},[t._v("系统")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("centos 7")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"center"}},[t._v("zabbix版本")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("4.0LTS")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"center"}},[t._v("MySQL")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("5.7.27")])])])]),t._v(" "),e("h2",{attrs:{id:"zabbix-server-的安装"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#zabbix-server-的安装","aria-hidden":"true"}},[t._v("#")]),t._v(" zabbix server 的安装")]),t._v(" "),e("ol",[e("li",[t._v("Install Zabbix repository")])]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("# rpm -Uvh https://repo.zabbix.com/zabbix/4.0/rhel/7/x86_64/zabbix-release-4.0-2.el7.noarch.rpm\n# yum clean all\n")])])]),e("ol",{attrs:{start:"2"}},[e("li",[t._v("Install Zabbix server, frontend")])]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("# yum -y install zabbix-server-mysql zabbix-web-mysql\n")])])]),e("ol",{attrs:{start:"3"}},[e("li",[t._v("Create initial database")])]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("# mysql -uroot -p\npassword\nmysql> create database zabbix character set utf8 collate utf8_bin;\nmysql> grant all privileges on zabbix.* to zabbix@localhost identified by 'password';\nmysql> quit;\n")])])]),e("p",[e("em",[t._v("备注")]),t._v(" 此处需要将password换成相对应的符合密码规范的密码")]),t._v(" "),e("ol",{attrs:{start:"4"}},[e("li",[t._v("导入zabbix所需的sql")])]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("# zcat /usr/share/doc/zabbix-server-mysql*/create.sql.gz | mysql -uzabbix -p zabbix\n")])])]),e("ol",{attrs:{start:"5"}},[e("li",[t._v("Configure the database for Zabbix server")])]),t._v(" "),e("p",[t._v("Edit file /etc/zabbix/zabbix_server.conf")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("DBPassword=password\n")])])]),e("p",[e("em",[t._v("备注")]),t._v(" 此处需要将password换成刚才替换的密码")]),t._v(" "),e("ol",{attrs:{start:"6"}},[e("li",[t._v("Configure PHP for Zabbix frontend")])]),t._v(" "),e("p",[t._v("Edit file /etc/httpd/conf.d/zabbix.conf, uncomment and set the right timezone for you.")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("# php_value date.timezone Asia/Shanghai\n")])])]),e("ol",{attrs:{start:"7"}},[e("li",[t._v("Start Zabbix server processes")])]),t._v(" "),e("p",[t._v("Start Zabbix server and agent processes and make it start at system boot:")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("# systemctl restart zabbix-server httpd\n# systemctl enable zabbix-server httpd\n")])])]),e("p",[e("em",[t._v("备注")]),t._v(" 可能中间会出现一些错误，可能是部分listenport未打开，参考agent中打开端口的方式，尝试打开10051端口。")]),t._v(" "),e("ol",{attrs:{start:"8"}},[e("li",[t._v("frontend 操作")])]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("参考文档\nhttps://www.zabbix.com/documentation/4.0/manual/installation/install#installing_frontend\n")])])]),e("h2",{attrs:{id:"zabbix-agent-的安装"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#zabbix-agent-的安装","aria-hidden":"true"}},[t._v("#")]),t._v(" zabbix agent 的安装")]),t._v(" "),e("ol",[e("li",[t._v("Install Zabbix repository")])]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("# rpm -Uvh https://repo.zabbix.com/zabbix/4.0/rhel/7/x86_64/zabbix-release-4.0-2.el7.noarch.rpm\n# yum clean all\n")])])]),e("ol",{attrs:{start:"2"}},[e("li",[t._v("Install Zabbix agent")])]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("# yum -y install zabbix-agent\n")])])]),e("p",[e("em",[t._v("备注")]),t._v(" 此处可能会有失败，主要是openssl与zabbix-agent的不匹配的问题")]),t._v(" "),e("ol",{attrs:{start:"3"}},[e("li",[t._v("添加与查看防火墙接口")])]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("# 查看指定区域所有打开的端口\n# firewall-cmd --zone=public --list-ports\n\n# 在指定区域打开端口 (需要重启防火墙)\n# firewall-cmd --zone=public --add-port=10050/tcp --permanent\n\n# 重启防火墙\n# firewall-cmd --reload\n")])])]),e("ol",{attrs:{start:"4"}},[e("li",[t._v("Start Zabbix agent processes")])]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("# systemctl restart zabbix-agent\n# systemctl enable zabbix-agent\n")])])]),e("ol",{attrs:{start:"5"}},[e("li",[t._v("相关配置修改")])]),t._v(" "),e("p",[t._v("需要修改/etc/zabbix/zabbix_agentd.conf")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("# Passive checks related - Server\nServer = server地址\n\n# Active checks related\nServerActive = server地址\n")])])]),e("ol",{attrs:{start:"6"}},[e("li",[t._v("重启agent")])]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("# systemctl restart zabbix-agent\n")])])]),e("h2",{attrs:{id:"参考文献"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#参考文献","aria-hidden":"true"}},[t._v("#")]),t._v(" 参考文献")]),t._v(" "),e("ol",[e("li",[e("a",{attrs:{href:"https://www.zabbix.com/download?zabbix=4.0&os_distribution=centos&os_version=7&db=mysql",target:"_blank",rel:"noopener noreferrer"}},[t._v("zabbix安装"),e("OutboundLink")],1)])])])},[],!1,null,null,null);a.default=r.exports}}]);